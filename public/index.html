<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CyberCore Arcade</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <div class="parallax">
    <div class="content">
      <h1>CyberCore Arcade</h1>
      <button onclick="loadApp('tictactoe')">Tic-Tac-Toe</button>
      <button onclick="loadApp('rockpaperscissors')">Rock, Paper, Scissors</button>
      <div id="app-container"></div>
    </div>
  </div>
  <script>
    function loadApp(appName) {
      const container = document.getElementById('app-container');
      container.style.display = 'block';
      if (appName === 'tictactoe') {
        container.innerHTML = `
          <h2>Tic-Tac-Toe</h2>
          <div id="status">Next player: X</div>
          <div class="board" id="board" style="display: grid; grid-template-columns: repeat(3, 50px);"></div>
          <p><a href="https://github.com/tecnocrat/creation-showcase/blob/main/public/tictactoe.html" target="_blank">Code</a> | <a href="./tutorials/tictactoe.pdf">Tutorial</a> | <button onclick="closeApp()">Close</button></p>
        `;
        startTicTacToe();
      } else if (appName === 'rockpaperscissors') {
        container.innerHTML = `
          <h2>Rock, Paper, Scissors</h2>
          <div class="choices">
            <button onclick="play('rock')">Rock</button>
            <button onclick="play('paper')">Paper</button>
            <button onclick="play('scissors')">Scissors</button>
          </div>
          <div id="result"></div>
          <p><a href="https://github.com/tecnocrat/creation-showcase/blob/main/public/rockpaperscissors.html" target="_blank">Code</a> | <a href="./tutorials/rockpaperscissors.pdf">Tutorial</a> | <button onclick="closeApp()">Close</button></p>
        `;
        // No extra init neededâ€”RPS logic is inline
      }
    }

    function closeApp() {
      const container = document.getElementById('app-container');
      container.style.display = 'none';
      container.innerHTML = '';
    }

    function startTicTacToe() {
      let board = Array(9).fill(null);
      let isXNext = true;
      const boardDiv = document.getElementById('board');
      const statusDiv = document.getElementById('status');
      for (let i = 0; i < 9; i++) {
        const btn = document.createElement('button');
        btn.style.width = '50px';
        btn.style.height = '50px';
        btn.style.fontSize = '20px';
        btn.addEventListener('click', () => handleClick(i));
        boardDiv.appendChild(btn);
      }
      function handleClick(index) {
        if (board[index] || calculateWinner(board)) return;
        board[index] = isXNext ? 'X' : 'O';
        isXNext = !isXNext;
        renderBoard();
        const winner = calculateWinner(board);
        statusDiv.textContent = winner ? `Winner: ${winner}` : `Next player: ${isXNext ? 'X' : 'O'}`;
      }
      function renderBoard() {
        const buttons = boardDiv.getElementsByTagName('button');
        for (let i = 0; i < buttons.length; i++) {
          buttons[i].textContent = board[i];
        }
      }
      function calculateWinner(squares) {
        const lines = [[0,1,2], [3,4,5], [6,7,8], [0,3,6], [1,4,7], [2,5,8], [0,4,8], [2,4,6]];
        for (let line of lines) {
          const [a, b, c] = line;
          if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) return squares[a];
        }
        return null;
      }
    }

    function play(userChoice) {
      const choices = ['rock', 'paper', 'scissors'];
      const computerChoice = choices[Math.floor(Math.random() * 3)];
      let result = '';
      if (userChoice === computerChoice) {
        result = "It's a tie!";
      } else if (
        (userChoice === 'rock' && computerChoice === 'scissors') ||
        (userChoice === 'paper' && computerChoice === 'rock') ||
        (userChoice === 'scissors' && computerChoice === 'paper')
      ) {
        result = `You win! ${userChoice} beats ${computerChoice}.`;
      } else {
        result = `You lose! ${computerChoice} beats ${userChoice}.`;
      }
      document.getElementById('result').textContent = `You chose ${userChoice}, computer chose ${computerChoice}. ${result}`;
    }
  </script>
</body>
</html>